var scrollTimer=null;var slider;var original_scroll=0;var slider_animation=0;var current_scroll=0;function scrollSlider(b){if(navigator.userAgent.indexOf("Android")!=-1){return}var a=b||window.event;el=a.target||a.srcElement;stopEvent(b);if(slider_animation){return}if(slider!=el){original_scroll=el.getAttribute("data-original-scroll")}slider=el;clearTimeout(scrollTimer);current_scroll=slider.scrollLeft;scrollTimer=setTimeout(function(c){if(current_scroll==slider.scrollLeft){if(navigator.userAgent.indexOf("Android")!=-1){slider.style.overflow="hidden"}slide(a,"snap")}},50)}function moveIndex(b){removeClass(slider.parentNode.querySelector(".slider-nav a.active"),"active");var a=(typeof b=="undefined")?(Math.round(slider.scrollLeft/slider.offsetWidth)):(b);if(slider.parentNode.querySelector(".slider-nav").children[a]){addClass(slider.parentNode.querySelector(".slider-nav").children[a],"active")}}function slideEnd(){original_scroll=slider.scrollLeft;el.setAttribute("data-original-scroll",original_scroll);moveIndex();slider_animation=0;forEach(".slider",function(b,a){b.onscroll=scrollSlider});if(navigator.userAgent.indexOf("Android")!=-1){slider.style.overflow="scroll"}}function slide(c,g){if(slider_animation){return}slider_animation=1;forEach(".slider",function(h,e){h.onscroll=null});var b=c||window.event;if(typeof b.srcElement=="unknown"){slideEnd();return}el=b.target||b.srcElement;stopEvent(b);if(typeof el=="undefined"){el=c}var f=0;if(g=="index"){slider=el.parentNode.parentNode.querySelector(".slider");start=slider.scrollLeft;f=slider.children[thisIndex(el)].offsetLeft-start}if(g=="arrow"){slider=el.parentNode.querySelector(".slider");start=slider.scrollLeft;var d=thisIndex(slider.parentNode.querySelector("a.active"));if(hasClass(el,"left")){i=0;while(i<slider.children.length){el=slider.children[i++];if(el.offsetLeft>=slider.scrollLeft){if(i>1){f=-1*(slider.scrollLeft-el.previousSibling.offsetLeft)}break}}}else{i=0;while(i<slider.children.length){el=slider.children[i++];if(el.offsetLeft>=slider.scrollLeft){f=el.offsetLeft-slider.scrollLeft;break}}if(!f){f=(slider.children.length-1>d)?slider.children[d+1].offsetLeft-slider.children[d].offsetLeft:0}}}if(g=="snap"){slider=el;start=slider.scrollLeft;if(slider.scrollLeft>original_scroll){f=slider.offsetWidth-slider.scrollLeft%slider.offsetWidth;var d=Math.round((f+start)/slider.offsetWidth);if(d>=slider.children.length){d=slider.children.length-1}f=slider.children[d].offsetLeft-slider.scrollLeft}else{f=slider.scrollLeft%slider.offsetWidth-slider.offsetWidth;f=-1*(slider.offsetWidth+f);var d=Math.round((f+start)/slider.offsetWidth);if(d<0){d=0}f=-1*(start-slider.children[d].offsetLeft)}if(original_scroll==slider.scrollLeft){f=0}}if(!f){slideEnd();return}currentTime=0,increment=20;duration=400;var a=function(){currentTime+=increment;var e=Math.easeInOutQuad(currentTime,start,f,duration);slider.scrollLeft=e;if((currentTime<duration)){requestAnimFrame(a)}else{if(slideEnd&&typeof(slideEnd)==="function"){slideEnd()}}};a()}function sliderKeyboard(b){var a=b||window.event;el=a.target||a.srcElement;if(a.keyCode==37){slide(el,"left")}if(a.keyCode==39){slide(el,"right")}}function scrollBarWidth(){if(navigator.userAgent.indexOf("MSIE 8")!=-1){return 17}var c=(navigator.userAgent.indexOf("Chrome")!=-1||navigator.userAgent.indexOf("Firefox")!=-1||navigator.userAgent.indexOf("Trident")!=-1)?document.documentElement.querySelector("body"):document.body;c.insertAdjacentHTML("beforeend",'<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;" id="outer"><div style="width: 100%; height:200px;" id="inner">test</div></div>');inner=document.getElementById("inner");outer=document.getElementById("outer");var b=inner.offsetWidth;outer.style.overflow="scroll";var a=outer.clientWidth;outer.parentNode.removeChild(outer);return(b-a)}function makeSlider(b){addClass(b,"slider");b.insertAdjacentHTML("beforebegin",'<div class="slider-container"></div>');container=b.previousSibling;container.insertAdjacentHTML("afterbegin",'<a class="slider-arrow left">←</a>'+b.outerHTML.replace(new RegExp(">[\n\t ]+<","g"),"><")+'<a class="slider-arrow right">→</a><div class="slider-nav"></div>');container.nextSibling.outerHTML="";b=container.querySelector(".slider");b.style.marginBottom="-"+scrollBarWidth()+"px";for(var a=0;a<b.children.length;a++){if(b.children[a].querySelector(".thumbnail")){slider_nav=b.parentNode.querySelector(".slider-nav");addClass(slider_nav,"thumbnails");addClass(slider_nav,"row");slider_nav.insertAdjacentHTML("beforeend",(!a?'<a class="active">':"<a>")+b.children[a].querySelector(".thumbnail").innerHTML+"</a>")}else{container.querySelector(".slider-nav").insertAdjacentHTML("beforeend",(!a?'<a class="active">':"<a>")+(a+1)+"</a>")}container.querySelector(".slider-nav").lastChild.onclick=function(c){slide(c,"index")}}container.querySelector(".slider-arrow.left").onclick=container.querySelector(".slider-arrow.right").onclick=function(c){slide(c,"arrow")};b.onscroll=scrollSlider;b.setAttribute("data-original-scroll",0);b.style.maxHeight=window.innerHeight+"px";return b}document.onkeyup=sliderKeyboard;forEach(".slider",function(b,a){makeSlider(b)});slider=document.querySelector(".slider");