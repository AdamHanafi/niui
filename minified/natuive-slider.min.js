var scrollTimer=null;var slider;var scroll_start=0;var original_scroll=0;var height_scroll=0;function scrollSlider(b){var a=b||window.event;s=a.target||a.srcElement;if(s!=slider){slider=s;original_scroll=slider.scrollLeft}clearTimeout(scrollTimer);scrollTimer=setTimeout(function(){scroll_start=slider.scrollLeft;slide(a,"snap")},50)}function moveIndex(b){if(!b){b=slider}removeClass(b.parentNode.querySelector(".slider-nav a.active"),"active");var a=Math.round(b.scrollLeft/b.offsetWidth)+1;addClass(b.parentNode.getElementsByClassName("slider-nav")[0].childNodes[a-1],"active")}function slideEnd(){slider.onscroll=scrollSlider;clearTimeout(scrollTimer);removeClass(document.body,"disable-hover");moveIndex();original_scroll=slider.scrollLeft;document.onkeyup=sliderKeyboard}function slide(d,c){clearTimeout(scrollTimer);var b=d||window.event;el=b.target||b.srcElement;slider=el;if(slider){slider.onscroll=function(){return false}}stopEvent(d);var f=0;addClass(document.body,"disable-hover");if(c=="index"){slider=el.parentNode.parentNode.getElementsByClassName("slider")[0];start=slider.scrollLeft;f=thisIndex(el)*slider.offsetWidth-start}if(c=="left"){slider=el.parentNode.getElementsByClassName("slider")[0];start=slider.scrollLeft;f=slider.scrollLeft-slider.offsetWidth-start}if(c=="right"){slider=el.parentNode.getElementsByClassName("slider")[0];start=slider.scrollLeft;f=slider.scrollLeft+slider.offsetWidth-start}if(c=="snap"){if(slider.scrollLeft>original_scroll){f=slider.offsetWidth-slider.scrollLeft%slider.offsetWidth}else{f=slider.scrollLeft%slider.offsetWidth-slider.offsetWidth;f=-1*(slider.offsetWidth+f)}start=slider.scrollLeft;console.log(start+" "+f)}currentTime=0,increment=20;duration=400;var a=function(){currentTime+=increment;var e=Math.easeInOutQuad(currentTime,start,f,duration);slider.scrollLeft=e;if(currentTime<duration){requestAnimFrame(a)}else{if(slideEnd&&typeof(slideEnd)==="function"){slideEnd()}}};a()}function sliderKeyboard(a){}function makeSlider(b){b.insertAdjacentHTML("beforebegin",'<div class="slider-container"></div>');container=b.previousSibling;container.insertAdjacentHTML("afterbegin",'<a class="slider-arrow left">←</a>'+b.outerHTML.replace(new RegExp(">[\n\t ]+<","g"),"><")+'<a class="slider-arrow right">→</a><div class="slider-nav"></div>');container.nextSibling.outerHTML="";b=container.getElementsByClassName("slider")[0];b.style.overflowX="hidden";height_scroll=b.offsetHeight;b.style.overflowX="scroll";height_scroll=b.offsetHeight-height_scroll;for(var a=0;a<b.children.length;a++){if(b.children[a].getElementsByClassName("thumbnail")[0]){slider_nav=b.parentNode.getElementsByClassName("slider-nav")[0];addClass(slider_nav,"thumbnails");addClass(slider_nav,"row");slider_nav.insertAdjacentHTML("beforeend",(!a?'<a class="active">':"<a>")+b.children[a].getElementsByClassName("thumbnail")[0].innerHTML+"</a>");slider_nav.style.marginTop=(-1*height_scroll)+"px"}else{container.getElementsByClassName("slider-nav")[0].insertAdjacentHTML("beforeend",(!a?'<a class="active">':"<a>")+(a+1)+"</a>")}container.getElementsByClassName("slider-nav")[0].lastChild.onclick=function(c){slide(c,"index")}}container.querySelector(".slider-arrow.left").onclick=function(c){slide(c,"left")};container.querySelector(".slider-arrow.right").onclick=function(c){slide(c,"right")};b.onscroll=scrollSlider}addEventHandler(window,"load",function(){document.onkeyup=sliderKeyboard;forEach(".slider",function(b,a){if(!a){slider=b}makeSlider(b)});window.onresize=function(){forEach(".slider",function(b,a){b.scrollLeft=0;moveIndex(b)})}});