
var scrollTimer=null;var slider;var scroll_start=0;var original_scroll=0;function scrollSlider(e){var event=e||window.event;slider=event.target||event.srcElement;clearTimeout(scrollTimer);scrollTimer=setTimeout(function(){scroll_start=slider.scrollLeft;slide(event,'snap');},50);};function moveIndex(){removeClass(slider.parentNode.querySelector('.slider-nav a.active'),'active');var index=Math.round(slider.scrollLeft/slider.offsetWidth)+1;addClass(slider.parentNode.querySelector('.slider-nav').childNodes[index-1],'active');}
function slideEnd(){slider.onscroll=scrollSlider;clearTimeout(scrollTimer);removeClass(document.body,'disable-hover');moveIndex();original_scroll=slider.scrollLeft;document.onkeyup=sliderKeyboard;}
function slide(e,target){clearTimeout(scrollTimer);slider.onscroll=function(){return false;};stopEvent(e);var event=e||window.event;el=event.target||event.srcElement;var change=0;addClass(document.body,'disable-hover');if(target=='index'){slider=el.parentNode.parentNode.querySelector('.slider');start=slider.scrollLeft;change=(el.innerHTML-1)*slider.offsetWidth-start;}
if(target=='left'){slider=el.parentNode.querySelector('.slider');start=slider.scrollLeft;change=slider.scrollLeft-slider.offsetWidth-start;}
if(target=='right'){slider=el.parentNode.querySelector('.slider');start=slider.scrollLeft;change=slider.scrollLeft+slider.offsetWidth-start;}
if(target=='snap'){console.log('From '+original_scroll+' to '+slider.scrollLeft);if(slider.scrollLeft>original_scroll){change=slider.offsetWidth-slider.scrollLeft%slider.offsetWidth;}else{change=slider.scrollLeft%slider.offsetWidth-slider.offsetWidth;change=-1*(slider.offsetWidth+change);}
start=slider.scrollLeft;console.log(start+' '+change);}
currentTime=0,increment=20;duration=400;var animateScroll=function(){currentTime+=increment;var val=Math.easeInOutQuad(currentTime,start,change,duration);slider.scrollLeft=val;if(currentTime<duration){requestAnimFrame(animateScroll);}else{if(slideEnd&&typeof(slideEnd)==='function'){slideEnd();}}};animateScroll();}
function sliderKeyboard(e){};addEventHandler(window,'load',function(){document.onkeyup=sliderKeyboard;forEachElement('.slider',function(el,i){if(!i){slider=el;}
el.insertAdjacentHTML('beforebegin','<div class="slider-container"></div>');container=el.previousSibling;container.insertAdjacentHTML('afterbegin','<a class="slider-arrow left">   </a>'+el.outerHTML.replace(new RegExp("\>[\n\t ]+\<","g"),"><")+'<a class="slider-arrow right">   </a><div class="slider-nav"></div>');container.nextSibling.outerHTML='';el=container.querySelector('.slider');for(var i=0;i<el.children.length;i++){container.querySelector('.slider-nav').insertAdjacentHTML('beforeend',(!i?'<a class="active">':'<a>')+(i+1)+'</a>');container.querySelector('.slider-nav').lastChild.onclick=function(e){slide(e,'index');};}
container.querySelector('.slider-arrow.left').onclick=function(e){slide(e,'left');}
container.querySelector('.slider-arrow.right').onclick=function(e){slide(e,'right');}
el.onscroll=scrollSlider;el.style.overflowX='hidden';var height_scroll=el.offsetHeight;el.style.overflowX='scroll';height_scroll=el.offsetHeight-height_scroll;container.style.height=(container.offsetHeight-height_scroll)+'px';});});function isTouchDevice(){return!!('ontouchstart'in window);}
function addClass(el,className){if(el.classList){el.classList.add(className);}else{el.className+=' '+className;}}
function removeClass(el,className){if(el.classList){el.classList.remove(className);}else{el.className=el.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ');}}
function hasClass(el,className){if(el.classList){return el.classList.contains(className);}else{return new RegExp('(^| )'+className+'( |$)','gi').test(el.className);}}
var parseHTML=function(str){tmp=document.implementation.createHTMLDocument('Parsed');tmp.body.innerHTML=str;return tmp.body;}
function forEachElement(selector,fn){elements=document.querySelectorAll(selector);for(var i=0;i<elements.length;i++){fn(elements[i],i);}}
function addEventHandler(elem,eventType,handler){if(elem.addEventListener){elem.addEventListener(eventType,handler,false);}else{if(elem.attachEvent){elem.attachEvent('on'+eventType,handler);}}}
function stopEvent(e){if(!e)var e=window.event;e.cancelBubble=true;e.returnValue=false;if(e.stopPropagation){e.stopPropagation();}
if(e.preventDefault){e.preventDefault();}
return false;}
if(typeof document.body.style.textShadow=='undefined'){forEachElement('.accordion label',function(el,i){el.onclick=function(e){if(hasClass(window.event.srcElement,'open')){removeClass(window.event.srcElement,'open')}else{addClass(window.event.srcElement,'open')}
return false;};});forEachElement('label.trigger',function(el,i){el.onclick=function(e){var event=e||window.event;var target=event.target||event.srcElement;el=target.parentNode.querySelector('ul');if(hasClass(el,'open')){removeClass(el,'open');}else{addClass(el,'open');}}});}
function updateURLParameter(url,param,paramVal){var newAdditionalURL="";var tempArray=url.split("?");var baseURL=tempArray[0];var additionalURL=tempArray[1];var temp="";if(additionalURL){tempArray=additionalURL.split("&");for(i=0;i<tempArray.length;i++){if(tempArray[i].split('=')[0]!=param){newAdditionalURL+=temp+tempArray[i];temp="&";}}}
var rows_txt=temp+""+param+"="+paramVal;return baseURL+"?"+newAdditionalURL+rows_txt;}
function getURLParameters(){var res={},re=/[?&]([^?&]+)=([^?&]+)/g;location.href.replace(re,function(_,k,v){res[k]=v;});return res;}
var tip;function hideTip(e){if(!tip)return;tip.style.display='none';tip.style.opacity=0;}
function showTip(e){var event=e||window.event;var target=event.target||event.srcElement;tip=target.querySelector('.tip');if(!tip)return;tip.parentNode.parentNode.style.position='relative';tip.style.top=(tip.parentNode.offsetTop+tip.parentNode.offsetHeight)+'px';tip.style.opacity=1;tip.style.display='block';}
function relayParameters(){parameters=getURLParameters();forEachElement('a[href]',function(el,i){for(var name in parameters){if(!el.href.indexOf('javascript')||(!el.href.indexOf('mailto')))continue;var hash=el.href.split('#')[1]?('#'+el.href.split('#')[1]):'';el.href=updateURLParameter(el.href.split('#')[0],name,parameters[name])+hash;}});}
Math.easeInOutQuad=function(t,b,c,d){t/=d/2;if(t<1){return c/2*t*t+b}
t--;return-c/2*(t*(t-2)-1)+b;};Math.easeInCubic=function(t,b,c,d){var tc=(t/=d)*t*t;return b+c*(tc);};Math.inOutQuintic=function(t,b,c,d){var ts=(t/=d)*t,tc=ts*t;return b+c*(6*tc*ts+ -15*ts*ts+10*tc);};var requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};})();function scrollTo(to,callback){var doc=(navigator.userAgent.indexOf('Firefox')!=-1||navigator.userAgent.indexOf('Trident')!=-1)?document.documentElement:document.body,start=doc.scrollTop,change=to-start,currentTime=0,increment=20;var animateScroll=function(){currentTime+=increment;var val=Math.easeInOutQuad(currentTime,start,change,400);doc.scrollTop=val;if(currentTime<400){requestAnimFrame(animateScroll);}else{if(callback&&typeof(callback)==='function'){callback();}}};animateScroll();}
function removeBlackbox(){var blackbox=document.getElementById('blackbox');if(blackbox)document.body.removeChild(blackbox);document.body.style.overflow='auto';}
function modalWindow(e){document.body.onkeyup=function(e){var event=e||window.event;if(event.keyCode==27){removeBlackbox();}};var event=e||window.event;var target=event.target||event.srcElement;if(hasClass(target,'lightbox')){document.body.insertAdjacentHTML('afterbegin','<div id="blackbox"> </div>');document.body.style.overflow='hidden';document.getElementById('blackbox').innerHTML='<div class="close">     '+document.title+'</div><img src="'+target.href+'" alt="Lightbox">';document.getElementById('blackbox').querySelector('.close').onclick=removeBlackbox;}else{if(navigator.userAgent.indexOf('MSIE 8')!=-1){window.open(target.href,'_blank');return;}
request=new XMLHttpRequest();request.open('GET',target.href.split('#')[0],true);request.onload=function(){if(request.status>=200&&request.status<400){container=(typeof target.href.split('#')[1]!='undefined')?('#'+target.href.split('#')[1]):0;document.body.insertAdjacentHTML('afterbegin','<div id="blackbox"> </div>');document.body.style.overflow='hidden';blackbox=document.getElementById('blackbox');blackbox.insertAdjacentHTML('afterbegin','<div class="close">     '+document.title+'</div>');blackbox.querySelector('.close').onclick=removeBlackbox;if(container){parsed=parseHTML(request.responseText);if(!parsed.querySelector(container)){removeBlackbox();return false;}
blackbox.insertAdjacentHTML('beforeend',parsed.querySelector(container).innerHTML);}else{blackbox.insertAdjacentHTML('beforeend',request.responseText);}
relayParameters();}else{}};request.onerror=function(){};request.send();}
return false;}
addEventHandler(window,'load',function(){relayParameters();forEachElement('a.modal-link, a.lightbox',function(el,i){el.onclick=modalWindow;});forEachElement('.tool',function(el,i){el.onclick=showTip;if(!isTouchDevice()){el.onmouseover=showTip;el.onmouseout=hideTip;}
addEventHandler(el,'touchmove',hideTip,false);});document.body.insertAdjacentHTML('beforeend','<a class="backtotop" href="#">     </a>');forEachElement('textarea',function(el,i){el.onkeyup=function(e){var event=e||window.event;var textArea=event.target||event.srcElement;while(textArea.rows>1&&textArea.scrollHeight<textArea.offsetHeight)
{textArea.rows--}
while(textArea.scrollHeight>textArea.offsetHeight)
{textArea.rows++}
textArea.rows++};});forEachElement('form',function(el,i){el.onsubmit=function(){ready_to_submit=true;elements=el.querySelectorAll('.mandatory');Array.prototype.forEach.call(elements,function(el,i){if(!el.querySelector('input, select, textarea').value){ready_to_submit=false;addClass(el,'alert');}else{removeClass(el,'alert');}});return ready_to_submit;};});});